!function(t){ var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=11)}([function(t,e,n){"use strict";e.a={SERVER_ENV:"production",endpoints:{ERROR_LOGGER:"/v2/js-error",ANALYTICS:"/payments/analytics/standalone.js",LOGO:"/v2/logo.html",V:"/v2/v",CARD_NONCE:"/v2/card-nonce",IFRAME:"/v2/iframe",APPLE_PAY_VALIDATE_MERCHANT:"/v2/apple-pay/validate-merchant",GOOGLE_PAY_GENERATE_TOKEN:"/digital-wallets/google-pay/token",MASTERPASS_CALLBACK:"/v2/masterpass/callback"},events:{LOAD_FORM_CONTROLLER:"loadFormController",REQUEST_CARD_NONCE_IF_VALID_FORM:"requestCardNonceIfValidForm",BUILD_STYLES_FOR_SCREEN_WIDTH:"buildStylesForScreenWidth",SET_POSTAL_CODE:"setPostalCode",BLUR_ALL_INPUTS:"blurAllInputs",LOAD_WALLET:"loadWallet",CARD_NONCE_RESPONSE_RECEIVED:"cardNonceResponseReceived",INPUT_EVENT_RECEIVED:"inputEventReceived",SET_INPUT_HEIGHT:"setInputHeight",PAYMENT_FORM_LOADED:"paymentFormLoaded",INSTALL_ERROR_LOGGER:"installErrorLogger",REQUEST_APPLE_PAY_CARD_NONCE:"requestApplePayCardNonce",RECEIVE_APPLE_PAY_CARD_NONCE:"receiveApplePayCardNonce",REQUEST_APPLE_PAY_MERCHANT_VALIDITY:"requestApplePayMerchantValidity",RECEIVE_APPLE_PAY_VALID_MERCHANT:"receiveApplePayValidMerchant",REQUEST_GOOGLE_PAY_CARD_NONCE:"requestGooglePayCardNonce",RECEIVE_GOOGLE_PAY_CARD_NONCE:"receiveGooglePayCardNonce",REQUEST_GOOGLE_PAY_TOKEN:"requestGooglePayToken",RECEIVE_GOOGLE_PAY_TOKEN:"receiveGooglePayToken",RECEIVE_MASTERPASS_TRANSACTION:"receiveMasterpassTransaction",SET_MASTERPASS_CHECKOUT_ID:"setMasterpassCheckoutId",REQUEST_MASTERPASS_CARD_NONCE:"requestMasterpassCardNonce"},inputEvents:{SUBMIT:"submit",EMPTY_STATE_CHANGED:"emptyStateChanged",FOCUS_CLASS_ADDED:"focusClassAdded",FOCUS_CLASS_REMOVED:"focusClassRemoved",ERROR_CLASS_ADDED:"errorClassAdded",ERROR_CLASS_REMOVED:"errorClassRemoved",CARD_BRAND_CHANGED:"cardBrandChanged",POSTAL_CODE_CHANGED:"postalCodeChanged"},inputTypes:{CARD_NUMBER:"cardNumber",GIFT_CARD:"giftCard",CVV:"cvv",EXPIRATION_DATE:"expirationDate",POSTAL_CODE:"postalCode"},wallets:{APPLE_PAY:"applePay",GOOGLE_PAY:"googlePay",MASTERPASS:"masterpass"},GOOGLE_PAY_JS:"https://pay.google.com/gp/p/js/pay.js"}},function(t,e,n){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}e.a={getWindow:function(){return window},getDocument:function(){return this.getWindow().document},getReadyState:function(){return this.getDocument().readyState},getSiblingIframe:function(t){if("string"==typeof t){var e;try{e=window.parent.frames[t]}catch(e){throw new Error("Error obtaining reference to iframe: ".concat(t))}if("object"===o(e)&&"function"==typeof e.setInterval)return e;var n=o(e);if(e&&e.constructor){var i=e.constructor.toString().match(/[function|object] (\w*)/);i&&(n=i[1])}throw new Error("Iframe reference '".concat(t,"' is unexpected type: ").concat(n))}},getOrigin:function(){var t=this.getWindow().location;return t.origin?t.origin:t.protocol+"//"+t.host},getParentLocation:function(){return this.getWindow().location!=this.getWindow().parent.location?this.getDocument().referrer:this.getDocument().location},getParentHref:function(){var t=this.getParentLocation();return"string"==typeof t?t:t.href},getParentOrigin:function(){var t=this.getParentLocation();if(t.origin)return t.origin;var e=this.getDocument().createElement("a");return e.href=t,e.protocol+"//"+e.host}}},function(t,e,n){"use strict";var o=n(1);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var a={},r=Object.prototype.hasOwnProperty;a.embeddingAllowed=function(t,e){return/localhost$/.test(e.hostname)||"development"===t.name||"file:"===e.protocol||"https:"===e.protocol},a.isSupportedBrowser=function(){var t=o.a.getWindow(),e=o.a.getDocument();return void 0!==t.postMessage&&void 0!==t.XMLHttpRequest&&void 0!==e.createElement("a").classList},a.cloneObject=function(t){var e={};for(var n in t)r.call(t,n)&&(e[n]=t[n]);return e},a.hasOwn=function(t,e){return r.call(t,e)},a.objectValues=function(t){if("function"==typeof Object.values)return Object.values(t);var e=[];for(var n in t)r.call(t,n)&&e.push(t[n]);return e},a.isIE10=function(){return!!o.a.getDocument().documentElement.doScroll},a.guid=function(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()},a.truncate=function(t,e){return t.length<=e?t:t.substring(0,e-1)+"â€¦"},a.isValidDataType=function(t,e,n,a){return n instanceof a||i(n)===a.name.toLowerCase()||(o.a.getWindow().console.error("".concat(t," in ").concat(e," must be of type ").concat(a.name,".")),!1)},a.logInvalidFieldsError=function(t,e){var n=e.join(", ");o.a.getWindow().console.error("Invalid ".concat(t," field(s): ").concat(n))},e.a=a},function(t,e,n){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?function(e){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}():e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}function s(t){var e="function"==typeof Map?new Map:void 0;return(s=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,o)}function o(){return function(t,e,n){return(function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var o=[null];o.push.apply(o,e);var i=new(Function.bind.apply(t,o));return n&&l(i,n.prototype),i}).apply(null,arguments)}(t,arguments,c(this).constructor)}return o.prototype=Object.create(t.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),l(o,t)})(t)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t){return"https://docs.connect.squareup.com/payments/sqpaymentform/sqpaymentform-overview"+(t||"")}function u(t){return"https://docs.connect.squareup.com/api/paymentform"+(t||"")}var d=function(t){function e(t){return i(this,e),a(this,c(e).call(this,t||"Unknown SqError"))}return r(e,s(Error)),e}();d.prototype.name="SqError";var h=function(t){function e(t){return i(this,e),a(this,c(e).call(this,"SqPaymentForm element with id '".concat(t,"' not found. Has the DOM finished loading?\nSee: ").concat("https://docs.connect.squareup.com/payments/sqpaymentform/sqpaymentform-setup#step-3-add-the-html-form-to-your-payment-page")))}return r(e,d),e}();h.prototype.name="ElementNotFoundError";var m=function(t){function e(t){return i(this,e),a(this,c(e).call(this,"SqPaymentForm element with id '".concat(t,"' is not visible. Does it or a parent element have 'display:none'?")))}return r(e,d),e}();m.prototype.name="ElementNotVisibleError";var y=function(t){function e(t){return i(this,e),a(this,c(e).call(this,"SqPaymentForm field '".concat(t,"' is invalid.")))}return r(e,d),e}();y.prototype.name="InvalidFieldError";var f=function(t){function e(){i(this,e);var t=p("#requirements-and-limitations");return a(this,c(e).call(this,"SqPaymentForm can only be embedded on sites that use HTTPS.\nSee: ".concat(t)))}return r(e,d),e}();f.prototype.name="HttpsRequiredError";var g=function(t){function e(t){return i(this,e),a(this,c(e).call(this,"Cannot call SqPaymentForm#".concat(t," after SqPaymentForm#destroy. Create a new SqPaymentForm instance instead.")))}return r(e,d),e}();g.prototype.name="FormAlreadyDestroyedError";var E=function(t){function e(t){i(this,e);var n=p("#how-it-works-sqpaymentform-process-flow");return a(this,c(e).call(this,"Cannot call SqPaymentForm#".concat(t," before SqPaymentForm is ready. See: ").concat(n)))}return r(e,d),e}();E.prototype.name="FormNotReadyError";var v=function(t){function e(){i(this,e);var t=u("#build");return a(this,c(e).call(this,"SqPaymentForm#build called more than once. Did you mean to call SqPaymentForm#destroy first?\nSee: ".concat(t)))}return r(e,d),e}();v.prototype.name="FormAlreadyBuiltError";var b=function(t){function e(){i(this,e);var t=u("#destroy");return a(this,c(e).call(this,"Iframe no longer exists on site. Check if you called SqPaymentForm destroy() correctly.\nSee: ".concat(t)))}return r(e,d),e}();b.prototype.name="IframeDoesNotExistError";var I=function(t){function e(){i(this,e);var t=u("#shippingcontactchanged");return a(this,c(e).call(this,"validateShippingContact() has been deprecated. Please use shippingContactChanged().\nSee: ".concat(t)))}return r(e,d),e}();I.prototype.name="ValidateShippingContactDeprecatedError";var S=function(t){function e(){return i(this,e),a(this,c(e).call(this,"Only one of 'locationId' or 'accountId' can be specified."))}return r(e,d),e}();S.prototype.name="TooManyIdsError";var A=function(t){function e(t,n){i(this,e);var o=u("#configurationfields");return a(this,c(e).call(this,"The SqPaymentForm '".concat(t,"' argument must be of type '").concat(n,"'.\nSee: ").concat(o)))}return r(e,d),e}();A.prototype.name="InvalidArgumentError";var C=function(t){function e(t){i(this,e);var n=u("#configurationfields");return a(this,c(e).call(this,"The SqPaymentForm '".concat(t,"' argument is required.\nSee: ").concat(n)))}return r(e,d),e}();C.prototype.name="MissingArgumentError";var _=function(t){function e(t){i(this,e);var n=u("#_paymentform_functions");return a(this,c(e).call(this,"The SqPaymentForm '".concat(t,"' function was called with missing or invalid parameters.\nSee: ").concat(n)))}return r(e,d),e}();_.prototype.name="InvalidFunctionArgumentError";var P=function(t){function e(t){i(this,e);var n=u("#configurationfields");return a(this,c(e).call(this,"The SqPaymentForm '".concat(t,"' option value is invalid.\nSee: ").concat(n)))}return r(e,d),e}();P.prototype.name="InvalidOptionError";var T=function(t){function e(t){i(this,e);var n=u("#configurationfields");return a(this,c(e).call(this,"The SqPaymentForm '".concat(t,"' option type is invalid.\nSee: ").concat(n)))}return r(e,d),e}();T.prototype.name="InvalidOptionType";var N=function(t){function e(t){i(this,e);var n=u("#configurationfields");return a(this,c(e).call(this,"The SqPaymentForm '".concat(t,"' option is required.\nSee: ").concat(n)))}return r(e,d),e}();N.prototype.name="MissingOptionError";var L=function(t){function e(t){i(this,e);var n=u("#configurationfields");return a(this,c(e).call(this,"The SqPaymentForm 'elementId' option is required for '".concat(t,"'.\nSee: ").concat(n)))}return r(e,d),e}();L.prototype.name="MissingElementIdError";var O=function(t){function e(t){i(this,e);var n=u("#configurationfields");return a(this,c(e).call(this,"The SqPaymentForm '".concat(t,"' option is required.\nSee: ").concat(n)))}return r(e,d),e}();O.prototype.name="MissingInputTypeError";var R=function(t){function e(t){i(this,e);var n=u("#configurationfields");return a(this,c(e).call(this,"The SqPaymentForm '".concat(t,"' option is not expected in this configuration.\nSee: ").concat(n)))}return r(e,d),e}();R.prototype.name="UnexpectedInputTypeError";var w=function(t){function e(t){i(this,e);var n=u("#_callbackfunctions_detail");return a(this,c(e).call(this,"The SqPaymentForm '".concat(t,"' callback is required.\nSee: ").concat(n)))}return r(e,d),e}();w.prototype.name="MissingCallbackError";var M=function(t){function e(t){i(this,e);var n=u("#_callbackfunctions_detail");return a(this,c(e).call(this,"The SqPaymentForm '".concat(t,"' callback must be a function.\nSee: ").concat(n)))}return r(e,d),e}();M.prototype.name="InvalidCallbackError";var D=function(t){function e(){i(this,e);var t=u("#configurationfields");return a(this,c(e).call(this,"The SqPaymentForm requires at least one payment method.\nSee: ".concat(t)))}return r(e,d),e}();D.prototype.name="MissingPaymentMethodError";var k=function(t){function e(){i(this,e);var t=u("#configurationfields");return a(this,c(e).call(this,"The SqPaymentForm 'inputStyles' option must be an array.\nSee: ".concat(t)))}return r(e,d),e}();k.prototype.name="InvalidInputStylesError";var q=function(t){function e(t){i(this,e);var n=u("#datatype-inputstyleobjects");return a(this,c(e).call(this,"Invalid InputStyle property: '".concat(t,"'.\nSee: ").concat(n)))}return r(e,d),e}();q.prototype.name="InvalidInputStylePropertyError";var F=function(t){function e(t,n){i(this,e);var o=u("#datatype-inputstyleobjects");return a(this,c(e).call(this,"Invalid InputStyle value '".concat(t,"' for property '").concat(n,"'.\nSee: ").concat(o)))}return r(e,d),e}();F.prototype.name="InvalidInputStyleValueError";var G=function(t){function e(){return i(this,e),a(this,c(e).call(this,"Input height zero detected; using fallback value."))}return r(e,d),e}();G.prototype.name="InputHeightZeroError";var j=function(t){function e(){i(this,e);var t=p("#prerequisites");return a(this,c(e).call(this,"Browser not supported.\nSee: ".concat(t)))}return r(e,d),e}();j.prototype.name="UnsupportedBrowserError";var U=function(t){function e(){return i(this,e),a(this,c(e).call(this,"The label field in the 'PaymentRequest.total' object must be set "+"with the merchant name to use Apple Pay with an Account ID.\nSee: ".concat("https://docs.connect.squareup.com/payments/sqpaymentform/digitalwallet/applepay-setup#payment-request-object-example")))}return r(e,d),e}();U.prototype.name="MissingTotalLabelError",e.a={SqError:d,ElementNotFoundError:h,ElementNotVisibleError:m,InvalidFieldError:y,HttpsRequiredError:f,FormAlreadyDestroyedError:g,FormNotReadyError:E,FormAlreadyBuiltError:v,IframeDoesNotExistError:b,TooManyIdsError:S,ValidateShippingContactDeprecatedError:I,InvalidArgumentError:A,MissingArgumentError:C,InvalidFunctionArgumentError:_,InvalidOptionError:P,InvalidOptionType:T,MissingOptionError:N,MissingElementIdError:L,MissingInputTypeError:O,UnexpectedInputTypeError:R,MissingCallbackError:w,InvalidCallbackError:M,MissingPaymentMethodError:D,InvalidInputStylesError:k,InvalidInputStylePropertyError:q,InvalidInputStyleValueError:F,InputHeightZeroError:G,UnsupportedBrowserError:j,MissingTotalLabelError:U}},function(t,e,n){"use strict";var o=n(2),i={};function a(t,e,n){this.message="Request timeout exceeded (attempts=".concat(t,"; ").concat(e,"ms; ").concat(n,")"),this.name="TimeoutError";var o=Error(this.message);this.stack=o.stack,this.columnNumber=o.columnNumber,this.fileName=o.fileName,this.lineNumber=o.lineNumber}function r(t,e,n){this.message="Network error during request (attempts=".concat(t,"; ").concat(e,"ms; ").concat(n,")"),this.name="NetworkError";var o=Error(this.message);this.stack=o.stack,this.columnNumber=o.columnNumber,this.fileName=o.fileName,this.lineNumber=o.lineNumber}function s(t,e,n){this.message="Invalid JSON received from ".concat(t,"; status=").concat(e," response=").concat(n),this.name="InvalidJsonError";var o=Error(this.message);this.stack=o.stack,this.columnNumber=o.columnNumber,this.fileName=o.fileName,this.lineNumber=o.lineNumber}i.REQUEST_DURATION_MAX_MS=3e4,i.REQUEST_TIMEOUT_MS=[3e3,9e3,18e3],i.RETRY_DELAY_MS=200,i.BACKOFF_FACTOR=1.66,a.prototype=Object.create(Error.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),i.TimeoutError=a,r.prototype=Object.create(Error.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),i.NetworkError=r,s.prototype=Object.create(Error.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),i.InvalidJsonError=s,i.post=function(t,e,n){n||"function"!=typeof e||(n=e,e={}),e||(e={}),"function"!=typeof n&&(n=function(){}),e._attempts?e._attempts+=1:e._attempts=1,e._startTime||(e._startTime=Date.now()),e.timeout||(e.timeout=i.REQUEST_TIMEOUT_MS[0]);var l=new XMLHttpRequest;if(l.open("POST",t,!0),l.timeout=e.timeout,l.withCredentials=!0,e.headers)for(var c in e.headers)o.a.hasOwn(e.headers,c)&&l.setRequestHeader(c,e.headers[c]);e.json&&(e.body&&(e.body=null),l.setRequestHeader("Accept","application/json"),l.setRequestHeader("Content-Type","application/json; charset=utf-8"));var p=e.body||JSON.stringify(e.json);l.onreadystatechange=function(){if(4===l.readyState&&0!==l.status){var a=l.responseText;if(a&&e.json)try{a=JSON.parse(a)}catch(c){var r=o.a.truncate(a,64);return n(new s(t,l.status,r))}var c={headers:i.parseHeaders(l.getAllResponseHeaders()),status:l.status,statusText:l.statusText};n(null,c,a)}},l.onerror=function(){l.abort();var o=e._attempts-1,a=i.backoff(i.RETRY_DELAY_MS,o),s=Date.now()-e._startTime,c=i.REQUEST_DURATION_MAX_MS-s;if(c<=a){if(c>e.timeout){var p=c-e.timeout;return void setTimeout(function(){i.post(t,e,n)},p)}n(new r(e._attempts,s,t))}else setTimeout(function(){i.post(t,e,n)},a)},l.ontimeout=function(){l.abort();var o=Date.now()-e._startTime,r=i.REQUEST_DURATION_MAX_MS-o;if(r<=0)n(new a(e._attempts,o,t));else{var s=i.REQUEST_TIMEOUT_MS[Math.min(e._attempts,2)];r<s&&(s=r),e.timeout=s,setTimeout(function(){i.post(t,e,n)},0)}},l.send(p)},i.parseHeaders=function(t){var e={};return t&&t.split("\r\n").forEach(function(t){var n=t.indexOf(": ");if(0<n){var o=t.substring(0,n),i=t.substring(n+2);e[o]=i}}),e},i.backoff=function(t,e){var n=i.BACKOFF_FACTOR;return Math.floor(t*Math.pow(n,e))},e.a=i},function(t,e,n){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i={AF:"Afghanistan",AL:"Albania",DZ:"Algeria",AS:"American Samoa",AD:"Andorra",AO:"Angola",AI:"Anguilla",AQ:"Antarctica",AG:"Antigua And Barbuda",AR:"Argentina",AM:"Armenia",AW:"Aruba",AU:"Australia",AT:"Austria",AZ:"Azerbaijan",BS:"Bahamas",BH:"Bahrain",BD:"Bangladesh",BB:"Barbados",BY:"Belarus",BE:"Belgium",BZ:"Belize",BJ:"Benin",BM:"Bermuda",BT:"Bhutan",BO:"Bolivia",BQ:"Bonaire, Sint Eustatius, And Saba",BA:"Bosnia And Herzegovina",BW:"Botswana",BV:"Bouvet Island",BR:"Brazil",IO:"British Indian Ocean Territory",BN:"Brunei Darussalam",BG:"Bulgaria (rep.)",BF:"Burkina Faso",BI:"Burundi",KH:"Cambodia",CM:"Cameroon",CA:"Canada",CV:"Cape Verde",KY:"Cayman Islands",CF:"Central African Republic",TD:"Chad",JE:"Channel Islands",GG:"Channel Islands",CL:"Chile",CN:"China",CX:"Christmas Island",CC:"Cocos (keeling) Islands",CO:"Colombia",KM:"Comoros",CD:"Congo (dem. Rep.)",CG:"Congo (rep.)",CK:"Cook Islands",CR:"Costa Rica",CI:"Cote D'ivoire",HR:"Croatia",CW:"Curacao",CY:"Cyprus",CZ:"Czech Rep.",DK:"Denmark",DJ:"Djibouti",DM:"Dominica",DO:"Dominican Rep.",EC:"Ecuador",EG:"Egypt",SV:"El Salvador",GQ:"Equatorial Guinea",ER:"Eritrea",EE:"Estonia",ET:"Ethiopia",FK:"Falkland Islands (malvinas)",FO:"Faroe Islands",FJ:"Fiji",AX:"Finland",FI:"Finland",FR:"France",GF:"French Guiana",PF:"French Polynesia",TF:"French Southern Territories",GA:"Gabon",GM:"Gambia",GE:"Georgia",DE:"Germany",GH:"Ghana",GI:"Gibraltar",GR:"Greece",GL:"Greenland",GD:"Grenada (west Indies)",GP:"Guadeloupe",GU:"Guam",GT:"Guatemala",GN:"Guinea",GW:"Guinea-bissau",GY:"Guyana",HT:"Haiti",HM:"Heard And Mcdonald Islands",HN:"Honduras",HK:"Hong Kong",HU:"Hungary (rep.)",IS:"Iceland",IN:"India",ID:"Indonesia",IR:"Iran",IQ:"Iraq",IE:"Ireland",IM:"Isle Of Man",IL:"Israel",IT:"Italy",JM:"Jamaica",JP:"Japan",JO:"Jordan",KZ:"Kazakhstan",KE:"Kenya",KI:"Kiribati",KW:"Kuwait",KG:"Kyrgyzstan",LA:"Lao (people's Dem. Rep.)",LV:"Latvia",LB:"Lebanon",LS:"Lesotho",LR:"Liberia",LY:"Libya",LI:"Liechtenstein",LT:"Lithuania",LU:"Luxembourg",MO:"Macao",MK:"Macedonia",MG:"Madagascar",MW:"Malawi",MY:"Malaysia",MV:"Maldives",ML:"Mali",MT:"Malta",MH:"Marshall Islands",MQ:"Martinique",MR:"Mauritania",MU:"Mauritius",YT:"Mayotte",MX:"Mexico",FM:"Micronesia (federated State Of)",MC:"Monaco",MN:"Mongolia",ME:"Montenegro",MS:"Montserrat",MA:"Morocco",MZ:"Mozambique",MM:"Myanmar",NA:"Namibia",NR:"Nauru Central Pacific",NP:"Nepal",NL:"Netherlands",NC:"New Caledonia",NZ:"New Zealand",NI:"Nicaragua",NE:"Niger",NG:"Nigeria",NU:"Niue",NF:"Norfolk Island",MP:"Northern Mariana Islands",NO:"Norway",OM:"Oman",PK:"Pakistan",PW:"Palau",PS:"Palestinian Territory",PA:"Panama (rep.)",PG:"Papua New Guinea",PY:"Paraguay",PE:"Peru",PH:"Philippines",PN:"Pitcairn",PL:"Poland",PT:"Portugal",PR:"Puerto Rico",QA:"Qatar",MD:"Rep. Moldova",SG:"Rep. Of Singapore",RS:"Republic Of Serbia",RE:"Reunion",RO:"Romania",RU:"Russian Federation",RW:"Rwanda",BL:"Saint Barthelemy",SH:"Saint Helena",KN:"Saint Kitts And Nevis",LC:"Saint Lucia",MF:"Saint Martin",VC:"Saint Vincent And The Grenadines (antilles)",WS:"Samoa",SM:"San Marino",ST:"Sao Tome And Principe",SA:"Saudi Arabia",SN:"Senegal",SC:"Seychelles",SL:"Sierra Leone",SX:"Sint Maarten",SK:"Slovakia",SI:"Slovenia",SB:"Solomon Islands",SO:"Somalia",ZA:"South Africa",GS:"South Georgia",KR:"South Korea",SS:"South Sudan",ES:"Spain",LK:"Sri Lanka",PM:"St. Pierre And Miquelon",SR:"Suriname",SJ:"Svalbard And Jan Mayen Islands",SZ:"Swaziland",SE:"Sweden",CH:"Switzerland",TW:"Taiwan",TJ:"Tajikistan",TZ:"Tanzania (united Rep.)",TH:"Thailand",TL:"Timor-leste",TG:"Togo",TK:"Tokelau",TO:"Tonga",TT:"Trinidad And Tobago",TN:"Tunisia",TR:"Turkey",TM:"Turkmenistan",TC:"Turks And Caicos Islands",TV:"Tuvalu",UG:"Uganda",UA:"Ukraine",AE:"United Arab Emirates",GB:"United Kingdom",US:"United States",UM:"United States Minor Outlying Islands",UY:"Uruguay",UZ:"Uzbekistan",VU:"Vanuatu",VA:"Vatican",VE:"Venezuela",VN:"Viet Nam",VG:"Virgin Islands (british)",VI:"Virgin Islands (u.s.)",WF:"Wallis And Futuna Islands",EH:"Western Sahara",YE:"Yemen",ZM:"Zambia",ZW:"Zimbabwe"};function a(t){t&&"object"==o(t)||(t={}),this.data={},this.familyName=t.familyName,this.givenName=t.givenName,this.email=t.email,this.country=t.country,this.region=t.region,this.city=t.city,this.addressLines=t.addressLines,this.postalCode=t.postalCode,this.phone=t.phone}Object.defineProperty(a.prototype,"familyName",{get:function(){return this.data.familyName},set:function(t){this.data.familyName=t},enumerable:!0}),Object.defineProperty(a.prototype,"givenName",{get:function(){return this.data.givenName},set:function(t){this.data.givenName=t},enumerable:!0}),Object.defineProperty(a.prototype,"email",{get:function(){return this.data.email},set:function(t){this.data.email=t},enumerable:!0}),Object.defineProperty(a.prototype,"phone",{get:function(){return this.data.phone},set:function(t){this.data.phone=t},enumerable:!0}),Object.defineProperty(a.prototype,"country",{get:function(){return this.data.country},set:function(t){this.data.country!=t&&(this.data.country=t,this.data.countryName=i[t])},enumerable:!0}),Object.defineProperty(a.prototype,"countryName",{get:function(){return this.data.countryName},enumerable:!0}),Object.defineProperty(a.prototype,"region",{get:function(){return this.data.region},set:function(t){this.data.region=t},enumerable:!0}),Object.defineProperty(a.prototype,"city",{get:function(){return this.data.city},set:function(t){this.data.city=t},enumerable:!0}),Object.defineProperty(a.prototype,"addressLines",{get:function(){return this.data.addressLines},set:function(t){!t||t instanceof Array||(t=[t.toString()]),this.data.addressLines=t},enumerable:!0}),Object.defineProperty(a.prototype,"postalCode",{get:function(){return this.data.postalCode},set:function(t){this.data.postalCode=t},enumerable:!0}),a.prototype.toApplePay=function(){return{addressLines:this.data.addressLines,locality:this.data.city,administrativeArea:this.data.region,postalCode:this.data.postalCode,countryCode:this.data.country,country:this.data.countryName,givenName:this.data.givenName,familyName:this.data.familyName,emailAddress:this.data.email,phoneNumber:this.data.phone}},a.fromApplePay=function(t){if(!t)return t;var e=t.countryCode;return e&&(e=e.toUpperCase()),new a({addressLines:t.addressLines,city:t.locality,region:t.administrativeArea,postalCode:t.postalCode,country:e,givenName:t.givenName,familyName:t.familyName,email:t.emailAddress,phone:t.phoneNumber})},a.legacyFromApplePay=function(t){return t?new a({addressLines:t.addressLines,city:t.locality,region:t.administrativeArea,postalCode:t.postalCode,country:t.countryCode,givenName:t.givenName,familyName:t.familyName,email:t.emailAddress,phone:t.phoneNumber}):t},a.fromGooglePay=function(t){return t?new a({addressLines:[t.address1,t.address2,t.address3,t.address4,t.address5].filter(Boolean),city:t.locality,region:t.administrativeArea,postalCode:t.postalCode,country:t.countryCode,givenName:t.name,email:t.email,phone:t.phoneNumber}):t},e.a=a},function(t,e,n){"use strict";var o=n(0),i=n(1),a=n(4);function r(t){this.options=t||{},this.env=this.options.env,this.source=this.options.source,this.applicationId=this.options.applicationId,this.apiWrapper=this.options.apiWrapper,this.ignoreError=0,this.url=this.env.serviceUrl(o.a.endpoints.ERROR_LOGGER),this.urlMatcher=/.+/,this.options.captureUncaughtExceptions&&(this.options.captureUncaughtExceptions instanceof RegExp&&(this.urlMatcher=this.options.captureUncaughtExceptions),this.install(i.a.getWindow()))}(e.a=r).prototype.destroy=function(){this.originalOnerror&&(i.a.getWindow().onerror=this.originalOnerror,this.originalOnerror=null)},r.prototype.ignoreNextError=function(){this.ignoreError+=1,i.a.getWindow().setTimeout(function(){this.ignoreError-=1}.bind(this),0)},r.prototype.wrap=function(t){var e=this;if(t.__inner__)return t;function n(){var n=[].slice.call(arguments);try{return t.apply(this,n)}catch(n){throw e.capture(n),n}}return n.__inner__=t,n},r.prototype.capture=function(t){(t.name||t.message)&&("development"===this.env.name&&i.a.getWindow().console.error("[captured error]",t.message),this.ignoreNextError(),this._send(this._createPayload(t.name,t.message||"[unknown]",t.fileName||"[unknown]",t.lineNumber||-1,t.stack)))},r.prototype.install=function(t){t.__error_logger__||(t.__error_logger__=!0,this.originalOnerror=t.onerror,t.onerror=function(e,n,o,i,a){return this.ignoreError||/Script error/.test(e)||!this.urlMatcher.test(n)||this.capture(a),"function"==typeof this.originalOnerror&&this.originalOnerror.apply(t,[].slice.call(arguments))}.bind(this))},r.prototype._createPayload=function(t,e,n,o,a){var r=i.a.getWindow();return{app_id:this.applicationId,type:t,message:e,stack:a,ua:r.navigator.userAgent,url:r.location.href,app_url:i.a.getParentHref(),script_url:n,source:this.source,wrapper:this.apiWrapper}},r.prototype._send=function(t){a.a.post(this.url,{json:t},this._handleResponse.bind(this))},r.prototype._handleResponse=function(){}},function(t,e,n){"use strict";var o=["constructor","hasOwnProperty","isPrototypeOf","toLocaleString","toString","valueOf","__defineGetter__","__defineSetter__","__lookupGetter__","__lookupSetter__","__proto__"];function i(){this.handlers={}}i.prototype.add=function(t,e){if("string"!=typeof t||-1<o.indexOf(t))throw Error("Invalid event: "+t);this.handlers[t]?this.handlers[t].push(e):this.handlers[t]=[e]},i.prototype.handle=function(t,e){var n=this.handlers[t],o=0;if(n)for(var i=0;i<n.length;i++)n[i](e),o+=1;return o},e.a=i},function(t,e,n){"use strict";var o=n(1),i={production:{js:"https://js.squareup.com",service:"https://pci-connect.squareup.com"},sandbox:{js:"https://js.squareupsandbox.com",service:"https://pci-connect.squareupsandbox.com"},staging:{js:"https://js.squareupstaging.com",service:"https://pci-connect.squareupstaging.com"},development:{js:"http://localhost:3000",service:"http://localhost:3000"},test:{js:"http://localhost:9090",service:"http://localhost:9090"},mock:{js:"https://js.squareupstaging.com",service:"https://pci-connect.squareupstaging.com"}},a={production:{env:"PRODUCTION"},sandbox:{env:"TEST"},staging:{env:"TEST"},development:{env:"TEST"},test:{env:"TEST"},mock:{env:"TEST"}};function r(t,e,n){var o="";return e?(o="?version=3be0c4f0b6",n=n||{},Object.keys(n).forEach(function(t){n.hasOwnProperty(t)&&(o+="&"+encodeURIComponent(t)+"="+encodeURIComponent(n[t]))})):o=e="",encodeURI(t+e)+o}e.a=function(t){i[t]||(t="production");var e=i[t];return{name:t,googlePayEnv:a[t].env,masterpassJsUrl:function(e){switch(t){case"development":case"sandbox":case"staging":case"test":return"https://sandbox.static.masterpass.com/integration/merchant.js";case"mock":return r(o.a.getParentOrigin(),"/mocks/masterpass/merchant.js");case"production":default:return"https://static.masterpass.com/integration/merchant.js"}}(),jsUrl:function(t,n){return r(e.js,t,n)},serviceUrl:function(t,n){return r(e.service,t,n)}}}},function(t,e,n){"use strict";var o=n(0);function i(t,e){return!!t.querySelector(e)}function a(t,e){return void 0!==t[e]}var r,s=n(2),l=n(1),c=n(4);function p(t){this.options=t,this.env=this.options.env;var e=l.a.getWindow().performance;e&&"function"==typeof e.getEntriesByType?this.performance=e:this.performance=void 0}function u(t){switch(t.initiatorType){case"script":return/v2\/paymentform/.test(t.name);case"iframe":return/v2\/iframe/.test(t.name);default:return!1}}p.prototype.set=function(t,e){this.options[t]=e},p.prototype.collectLoadTiming=function(t){var e=this._resources().filter(u),n={t:t.tti};e.forEach(function(t){var e=function(t){switch(r||(r=l.a.getDocument().createElement("a")),r.href=t,r.pathname){case"/v2/paymentform":return"m";case"/v2/iframe":switch(!0){case/type=main/.test(r.search):return"f";case/type=cardNumber/.test(r.search):return"n";case/type=giftCard/.test(r.search):return"g";case/type=cvv/.test(r.search):return"v";case/type=expirationDate/.test(r.search):return"x";case/type=postalCode/.test(r.search):return"p";default:return"?"}}}(t.name),o=Math.round(t.duration);n[e]=o}),this._sendTimingEvent(0,n)},p.prototype.collectNonceTiming=function(t,e){var n=o.a.endpoints.CARD_NONCE+"\\?_="+t,i=this._resources().filter(function(t,e){switch(e.initiatorType){case"xmlhttprequest":return new RegExp(t).test(e.name);default:return!1}}.bind(null,n)).pop();i||(i={duration:Date.now()-e.startTime});var a={d:Math.round(i.duration),e:"".concat(e.error||!1)};"boolean"==typeof e.validLuhn&&(a.l="".concat(e.validLuhn)),this._sendTimingEvent(1,a)},p.prototype.collectConfiguration=function(t){delete t.sessionId,delete t.errorLogger,t._env||delete t.env,delete t._env;var e=Object.keys(t).filter(function(e){return!1!==t[e]}),n=Object.keys(t).filter(function(e){return!1===t[e]}),o=Object.keys(t.callbacks).filter(function(e){return"function"==typeof t.callbacks[e]});t.inputStyles&&t.inputStyles.some(function(t){if(t.mediaMinWidth||t.mediaMaxWidth)return e.push("mediaBreakpoints")});var r=function(t){for(var e=a(t,"angular"),n=a(t,"getAllAngularRootElements"),o=e||n,r=a(t,"bootstrap"),s=a(t,"Ember"),l=a(t,"jQuery"),c=i(t.document,'form[action*="paypal.com"]'),p=i(t.document,"[data-reactroot]"),u=a(t,"__NUXT__")||a(t,"$nuxt"),d={angular:o,bootstrap:r,ember:s,jquery:l,paypalBuyNow:c,react:p,vue:a(t,"Vue")||u},h=Object.keys(d),m=0;m<h.length;m++){var y=h[m];!0!==d[y]&&delete d[y]}return d}(l.a.getWindow()),s=Object.keys(r),c={e:e.join(" "),d:n.join(" "),c:o.join(" "),l:s.join(" ")};this._sendConfigurationEvent(c)},p.prototype._sendConfigurationEvent=function(t){var e=this._createEvent(2,{c:t});c.a.post(this.env.serviceUrl(o.a.endpoints.V),{json:e})},p.prototype._sendTimingEvent=function(t,e){var n=this._createEvent(t,{l:e});c.a.post(this.env.serviceUrl(o.a.endpoints.V),{json:n})},p.prototype._createEvent=function(t,e){var n={e:t,a:this.options.applicationId,o:this.options.locationId,q:this.options.accountId,n:this.options.sessionId,s:"SqPaymentForm",u:l.a.getWindow().location.href,v:l.a.getParentHref(),w:this.options.apiWrapper||""};for(var o in e)if(s.a.hasOwn(e,o)){if(n[o])throw new Error("Field already used: "+o);n[o]=e[o]}return n},p.prototype._resources=function(){return this.performance?this.performance.getEntriesByType("resource"):[]},e.a=p},,function(t,e,n){"use strict";n.r(e);var o=n(6),i=n(3),a=n(7),r=n(0),s=n(1);function l(t,e,n){this.type=t,this.options=e,this.callbacks=n,this.env=this.options.env,this.element=s.a.getDocument().createElement("iframe"),this.element.onload=this.onload.bind(this),this.setDefaultAttributes()}l.MIN_HEIGHT=17,l.prototype.onload=function(){"function"==typeof this.callbacks.onload&&this.callbacks.onload(this.type)},l.prototype.destroy=function(){this.element.parentNode&&this.element.parentNode.replaceChild(this.originalElement,this.element),this.originalElement=null,this.element=null},l.prototype.setDefaultAttributes=function(){var t=this.element;t.setAttribute("id",this.options.elementId),t.setAttribute("name",this.name()),t.setAttribute("class",this.combinedClassName()),t.setAttribute("frameBorder","0"),t.setAttribute("width","100%"),t.setAttribute("scrolling","no"),t.setAttribute("height",17),t.setAttribute("src",this.iframeSRC()),"cardNumber"!==this.type&&"main"!==this.type||t.setAttribute("allowPaymentRequest",!0),"main"===this.type&&(t.setAttribute("width","0"),t.setAttribute("height","0"),t.setAttribute("style","border: none !important; display: block !important; visibility: hidden !important"))},l.prototype.combinedClassName=function(){var t=[];return this.options.inputClass&&t.push(this.options.inputClass),this.options.inheritedClassName&&t.push(this.options.inheritedClassName),t.join(" ")},l.prototype.iframeSRC=function(){return this.env.serviceUrl(r.a.endpoints.IFRAME,this.queryParameters())},l.prototype.queryParameters=function(){var t={type:this.type};return"main"===this.type&&(t.app_id=this.options.applicationId,this.options.locationId&&(t.location_id=this.options.locationId),this.options.accountId&&(t.account_id=this.options.accountId)),t},l.prototype.addClass=function(t){this.element.classList.add(t)},l.prototype.removeClass=function(t){this.element.classList.remove(t)},l.prototype.focus=function(){this.element.focus()},l.prototype.name=function(){return this.options.elementId};var c=l,p=n(9),u=n(2);function d(t){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var h="SqLineItem";function m(t){t&&"object"==d(t)||(t={}),this.data={},this.label=t.label,this.pending=t.pending,this.amount=t.amount}Object.defineProperty(m.prototype,"label",{get:function(){return this.data.label},set:function(t){t&&u.a.isValidDataType("label",h,t,String)&&(this.data.label=t)},enumerable:!0}),Object.defineProperty(m.prototype,"pending",{get:function(){return this.data.pending},set:function(t){null!=t&&u.a.isValidDataType("pending",h,t,Boolean)&&(this.data.pending=t)},enumerable:!0}),Object.defineProperty(m.prototype,"amount",{get:function(){return this.data.amount},set:function(t){t&&u.a.isValidDataType("amount",h,t,String)&&(this.data.amount=t)},enumerable:!0}),m.prototype.toApplePayLineItem=function(){return{label:this.data.label,type:this.data.pending?"pending":"final",amount:this.data.amount}},m.prototype.toInstallmentsLineItem=function(){return{label:this.data.label,amount:this.data.amount,pending:this.data.pending}},m.prototype.isValid=function(){if("object"!==d(this.data)||"string"!=typeof this.data.label||"string"!=typeof this.data.amount)return!1;var t=Number.parseFloat(this.data.amount);return!isNaN(t)&&(void 0===this.data.pending||"boolean"==typeof this.data.pending)};var y=m;function f(t){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function g(t){t&&"object"==f(t)||(t={}),this.data={},this.id=t.id,this.label=t.label,this.amount=t.amount}Object.defineProperty(g.prototype,"id",{get:function(){return this.data.id},set:function(t){this.data.id=t},enumerable:!0}),Object.defineProperty(g.prototype,"label",{get:function(){return this.data.label},set:function(t){this.data.label=t},enumerable:!0}),Object.defineProperty(g.prototype,"amount",{get:function(){return this.data.amount},set:function(t){this.data.amount=t},enumerable:!0}),g.prototype.toApplePay=function(){return{label:this.data.label,detail:"",amount:this.data.amount,identifier:this.data.id}},g.fromApplePay=function(t){return t?new g({id:t.identifier,label:t.label,amount:t.amount}):t};var E=g;function v(t){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var b="PaymentDetailsUpdate",I={addressLines:"addressLines",city:"locality",region:"administrativeArea",country:"countryCode",postalCode:"postalCode"};function S(t){t&&"object"==v(t)||(t={}),this.data={},this.error=t.error,this.shippingContactErrors=t.shippingContactErrors,this.total=t.total,this.lineItems=t.lineItems,this.shippingOptions=t.shippingOptions}Object.defineProperty(S.prototype,"error",{get:function(){return this.data.error},set:function(t){t&&u.a.isValidDataType("error",b,t,String)&&(this.data.error=t)},enumerable:!0}),Object.defineProperty(S.prototype,"shippingContactErrors",{get:function(){return this.data.shippingContactErrors},set:function(t){t&&u.a.isValidDataType("shippingContactErrors",b,t,Object)&&(this.data.shippingContactErrors=t)},enumerable:!0}),Object.defineProperty(S.prototype,"total",{get:function(){return this.data.total},set:function(t){t&&u.a.isValidDataType("total",b,t,Object)&&(this.data.total=new y(t))},enumerable:!0}),Object.defineProperty(S.prototype,"lineItems",{get:function(){return this.data.lineItems},set:function(t){t&&u.a.isValidDataType("lineItems",b,t,Array)&&(this.data.lineItems=t.map(function(t){return new y(t)}))},enumerable:!0}),Object.defineProperty(S.prototype,"shippingOptions",{get:function(){return this.data.shippingOptions},set:function(t){t&&u.a.isValidDataType("shippingOptions",b,t,Array)&&(this.data.shippingOptions=t.map(function(t){return new E(t)}))},enumerable:!0}),S.prototype.toApplePayShippingContactUpdate=function(t){return{errors:this._toApplePayErrors(),newShippingMethods:this._toApplePayShippingMethods(t.shippingMethods),newTotal:this._toApplePayTotal(t.total),newLineItems:this._toApplePayLineItems(t.lineItems)}},S.prototype.toCompleteShippingContactSelectionInputs=function(t){return{status:this._toApplePayStatusCode(),newShippingMethods:this._toApplePayShippingMethods(t.shippingMethods),newTotal:this._toApplePayTotal(t.total),newLineItems:this._toApplePayLineItems(t.lineItems)}},S.prototype.toApplePayShippingMethodUpdate=function(t){return{newTotal:this._toApplePayTotal(t.total),newLineItems:this._toApplePayLineItems(t.lineItems)}},S.prototype.toCompleteShippingMethodSelectionInputs=function(t){return{status:ApplePaySession.STATUS_SUCCESS,newTotal:this._toApplePayTotal(t.total),newLineItems:this._toApplePayLineItems(t.lineItems)}},S.prototype._toApplePayErrors=function(){var t=[];for(var e in this.data.error&&t.push(new ApplePayError("addressUnserviceable","postalAddress",this.data.error)),this.data.shippingContactErrors)if(this.data.shippingContactErrors.hasOwnProperty(e)){var n=I[e]||"postalAddress";t.push(new ApplePayError("shippingContactInvalid",n,this.data.shippingContactErrors[e]))}return t},S.prototype._toApplePayStatusCode=function(){return this.data.error||this.data.shippingContactErrors?ApplePaySession.STATUS_INVALID_SHIPPING_POSTAL_ADDRESS:ApplePaySession.STATUS_SUCCESS},S.prototype._toApplePayShippingMethods=function(t){return this.data.shippingOptions?this.data.shippingOptions.map(function(t){return t.toApplePay()}):t},S.prototype._toApplePayTotal=function(t){return this.data.total?this.data.total.toApplePayLineItem():t||(s.a.getWindow().console.error("Field `total` in PaymentDetailsUpdate is required."),null)},S.prototype._toApplePayLineItems=function(t){return this.data.lineItems?this.data.lineItems.map(function(t){return t.toApplePayLineItem()}):t},S.prototype.toInstallments=function(){var t={};return this.data.total&&(t.total=this.data.total.toInstallmentsLineItem()),this.data.lineItems&&(t.lineItems=this.data.lineItems.map(function(t){return t.toInstallmentsLineItem()})),t},S.prototype.isValid=function(){var t=[];return this.data.total&&this.data.total.isValid()||t.push("total"),this.data.lineItems&&this.data.lineItems.some(function(e){if(!e.isValid())return t.push("lineItems")}),!(0<t.length&&(u.a.logInvalidFieldsError("PaymentDetailsUpdate",t),1))};var A=S,C=n(5);function _(t){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var P="SqPaymentRequest";function T(t){t&&"object"==_(t)||(t={}),this.data={},this.currencyCode=t.currencyCode,this.countryCode=t.countryCode,this.total=t.total,this.shippingContact=t.shippingContact,this.shippingOptions=t.shippingOptions,this.lineItems=t.lineItems,this.requestShippingAddress=t.requestShippingAddress,this.requestBillingInfo=t.requestBillingInfo}Object.defineProperty(T.prototype,"currencyCode",{get:function(){return this.data.currencyCode},set:function(t){t&&u.a.isValidDataType("currencyCode",P,t,String)&&(this.data.currencyCode=t)},enumerable:!0}),Object.defineProperty(T.prototype,"countryCode",{get:function(){return this.data.countryCode},set:function(t){t&&u.a.isValidDataType("countryCode",P,t,String)&&(this.data.countryCode=t)},enumerable:!0}),Object.defineProperty(T.prototype,"total",{get:function(){return this.data.total},set:function(t){t&&u.a.isValidDataType("total",P,t,Object)&&(this.data.total=new y(t))},enumerable:!0}),Object.defineProperty(T.prototype,"shippingContact",{get:function(){return this.data.shippingContact},set:function(t){t&&u.a.isValidDataType("shippingContact",P,t,Object)&&(this.data.shippingContact=new C.a(t))},enumerable:!0}),Object.defineProperty(T.prototype,"shippingOptions",{get:function(){return this.data.shippingOptions},set:function(t){t&&u.a.isValidDataType("shippingOptions",P,t,Array)&&(this.data.shippingOptions=t.map(function(t){return new E(t)}))},enumerable:!0}),Object.defineProperty(T.prototype,"lineItems",{get:function(){return this.data.lineItems},set:function(t){t&&u.a.isValidDataType("lineItems",P,t,Array)&&(this.data.lineItems=t.map(function(t){return new y(t)}))},enumerable:!0}),Object.defineProperty(T.prototype,"requestShippingAddress",{get:function(){return this.data.requestShippingAddress},set:function(t){null!=t&&u.a.isValidDataType("requestShippingAddress",P,t,Boolean)&&(this.data.requestShippingAddress=t)},enumerable:!0}),Object.defineProperty(T.prototype,"requestBillingInfo",{get:function(){return this.data.requestBillingInfo},set:function(t){null!=t&&u.a.isValidDataType("requestBillingInfo",P,t,Boolean)&&(this.data.requestBillingInfo=t)},enumerable:!0}),T.prototype.toApplePay=function(){var t={currencyCode:this.data.currencyCode,countryCode:this.data.countryCode,supportedNetworks:["visa","masterCard","discover","amex"],merchantCapabilities:["supports3DS"],requiredBillingContactFields:["postalAddress"]};return this.data.total&&(t.total=this.data.total.toApplePayLineItem()),this.data.shippingContact instanceof C.a&&(t.shippingContact=this.data.shippingContact.toApplePay()),this.data.shippingOptions?t.shippingMethods=this.data.shippingOptions.map(function(t){return t.toApplePay()}):t.shippingMethods=[],this.data.lineItems?t.lineItems=this.data.lineItems.map(function(t){return t.toApplePayLineItem()}):t.lineItems=[],this.data.requestBillingInfo&&(t.requiredShippingContactFields=["email","name","phone"]),this.data.requestShippingAddress&&(t.requiredShippingContactFields=["postalAddress","name","email","phone"]),t},T.prototype.toGooglePay=function(t){var e=t.buildBaseConfiguration();return e.transactionInfo={totalPriceStatus:this.data.total.pending?"ESTIMATED":"FINAL",totalPrice:this.data.total.amount,currencyCode:this.data.currencyCode||"USD"},e.emailRequired=!!this.data.requestShippingAddress,e.shippingAddressRequired=!!this.data.requestShippingAddress,e.shippingAddressParameters={phoneNumberRequired:!!this.data.requestShippingAddress},e.allowedPaymentMethods[0].parameters.billingAddressParameters={format:"MIN",phoneNumberRequired:!!this.data.requestBillingInfo},e},T.prototype.toInstallments=function(){var t={currencyCode:this.data.currencyCode,countryCode:this.data.countryCode,total:this.data.total.toInstallmentsLineItem()};return this.data.lineItems?t.lineItems=this.data.lineItems.map(function(t){return t.toInstallmentsLineItem()}):t.lineItems=[],t},T.prototype.isValid=function(){var t=[];return"US"!==this.data.countryCode&&t.push("countryCode"),"USD"!==this.data.currencyCode&&t.push("currencyCode"),"object"===_(this.data.total)&&this.data.total.isValid()||t.push("total"),this.data.lineItems&&this.data.lineItems.some(function(e){if(!e.isValid())return t.push("lineItems")}),!(0<t.length&&(u.a.logInvalidFieldsError("PaymentRequest",t),1))};var N=T;function L(t){if(this.controller=t,this.options=t.options,this.callbacks=t.callbacks,this.controller.enabledDigitalWallets.indexOf(r.a.wallets.APPLE_PAY)<0)this.controller.enableMethod(r.a.wallets.APPLE_PAY,!1);else if("undefined"!=typeof ApplePaySession)if(this.isConfigValid()){var e=this;this.applePayVersion=this.getSupportedApplePayVersion(),this.selectedShippingOption=null,this.validityPromise=ApplePaySession.canMakePaymentsWithActiveCard(this.getApplePayMerchantId()).then(function(t){if(t){var n=e.options.applePay.elementId;s.a.getDocument().getElementById(n).addEventListener("click",e.requestPayment.bind(e)),e.controller.messageHandlers.add(r.a.events.RECEIVE_APPLE_PAY_VALID_MERCHANT,e.receiveApplePayValidMerchant.bind(e)),e.controller.messageHandlers.add(r.a.events.RECEIVE_APPLE_PAY_CARD_NONCE,e.receiveApplePayCardNonce.bind(e)),e.controller.sendEvent(r.a.events.LOAD_WALLET,r.a.wallets.APPLE_PAY),e.controller.enableMethod(r.a.wallets.APPLE_PAY,!0)}else e.controller.enableMethod(r.a.wallets.APPLE_PAY,!1)}).catch(function(){e.controller.enableMethod(r.a.wallets.APPLE_PAY,!1)})}else this.controller.enableMethod(r.a.wallets.APPLE_PAY,!1);else this.controller.enableMethod(r.a.wallets.APPLE_PAY,!1)}L.prototype.isConfigValid=function(){if(!this.options.applePay||"function"!=typeof this.callbacks.createPaymentRequest||"function"!=typeof this.callbacks.cardNonceResponseReceived)return!1;var t=this.options.applePay.elementId;if(!s.a.getDocument().getElementById(t))throw new i.a.ElementNotFoundError(t);if(!this.options.locationId&&!this.options.accountId)throw new i.a.MissingOptionError("locationId");if("function"==typeof this.callbacks.validateShippingContact&&"function"==typeof this.callbacks.shippingContactChanged)throw new i.a.ValidateShippingContactDeprecatedError;return!0},L.prototype.requestPayment=function(){if(!this.session){var t=new N(this.callbacks.createPaymentRequest());this.applePayPaymentRequest=t.toApplePay(),t.shippingOptions&&(this.selectedShippingOption=t.shippingOptions[0]),this.session=new ApplePaySession(this.applePayVersion,this.applePayPaymentRequest);var e=this;this.session.onvalidatemerchant=function(t){e.requestApplePayMerchantValidity(t.validationURL,e.applePayPaymentRequest)},"function"==typeof this.callbacks.shippingContactChanged?this.session.onshippingcontactselected=function(t){e._shippingContactChanged(t.shippingContact,e.applePayPaymentRequest)}:"function"==typeof this.callbacks.validateShippingContact&&(this.session.onshippingcontactselected=function(t){e._validateShippingContact(t.shippingContact,e.applePayPaymentRequest)}),this.session.onshippingmethodselected=function(t){e.selectedShippingOption=E.fromApplePay(t.shippingMethod),e._shippingOptionChanged(e.selectedShippingOption,e.applePayPaymentRequest)},this.session.onpaymentauthorized=function(t){e.requestApplePayCardNonce(t.payment)},this.session.oncancel=function(){delete e.session},this.session.begin()}},L.prototype._shippingContactChanged=function(t,e){var n=this,o=n.applePayVersion<3?function(t){var o=new A(t);n.selectedShippingOption=n.getDefaultShippingOption(o);var i=o.toCompleteShippingContactSelectionInputs(e);n.updateApplePayPaymentRequest(i),n.session.completeShippingContactSelection(i.status,i.newShippingMethods,i.newTotal,i.newLineItems)}:function(t){var o=new A(t);n.selectedShippingOption=n.getDefaultShippingOption(o);var i=o.toApplePayShippingContactUpdate(e);n.updateApplePayPaymentRequest(i),n.session.completeShippingContactSelection(i)};this.callbacks.shippingContactChanged(C.a.fromApplePay(t),o)},L.prototype._validateShippingContact=function(t,e){var n="function"==typeof this.callbacks.validateShippingContact&&this.callbacks.validateShippingContact(C.a.legacyFromApplePay(t));if(this.applePayVersion<3){var o=n?ApplePaySession.STATUS_INVALID_SHIPPING_POSTAL_ADDRESS:ApplePaySession.STATUS_SUCCESS;this.session.completeShippingContactSelection(o,[],e.total,[])}else{var i=n?[new ApplePayError("shippingContactInvalid","postalAddress","Incorrect address")]:[];this.session.completeShippingContactSelection({errors:i,newTotal:e.total})}},L.prototype._shippingOptionChanged=function(t,e){var n=this,o=n.applePayVersion<3?function(t){var o=new A(t).toCompleteShippingMethodSelectionInputs(e);n.updateApplePayPaymentRequest(o),n.session.completeShippingMethodSelection(o.status,o.newTotal,o.newLineItems)}:function(t){var o=new A(t).toApplePayShippingMethodUpdate(e);n.updateApplePayPaymentRequest(o),n.session.completeShippingMethodSelection(o)};"function"==typeof this.callbacks.shippingOptionChanged?this.callbacks.shippingOptionChanged(t,o):o()},L.prototype.requestApplePayMerchantValidity=function(t,e){var n=e&&e.total?e.total.label:null;if(this.options.accountId&&!n)throw new i.a.MissingTotalLabelError;this.controller.sendEvent(r.a.events.REQUEST_APPLE_PAY_MERCHANT_VALIDITY,{client_id:this.options.applicationId,location_id:this.options.locationId,account_id:this.options.accountId,merchant_name:n,validation_url:t,source_url:s.a.getWindow().location.href})},L.prototype.receiveApplePayValidMerchant=function(t){var e={detail:"Unable to start Apple Pay session."};if(void 0!==this.session){if(t.payload.error)return this.callbacks.cardNonceResponseReceived([e]),void this.session.abort();var n;try{t.payload.session&&(n=JSON.parse(t.payload.session))}catch(t){this.options.errorLogger.capture(t)}n?this.session.completeMerchantValidation(n):(this.callbacks.cardNonceResponseReceived([e]),this.session.abort())}},L.prototype.requestApplePayCardNonce=function(t){this.controller.sendEvent(r.a.events.REQUEST_APPLE_PAY_CARD_NONCE,{client_id:this.options.applicationId,applepay_data:t})},L.prototype.receiveApplePayCardNonce=function(t){var e=t.payload.nonceResponse;if(e.errors)return this.session.completePayment(this.session.STATUS_FAILURE),this.controller.callbacks.cardNonceResponseReceived(e.errors),delete this.session,!1;this.session.completePayment(this.session.STATUS_SUCCESS);var n=C.a.legacyFromApplePay(e.card.contact),o=C.a.legacyFromApplePay(e.shipping_contact);delete e.card.contact,this.controller.callbacks.cardNonceResponseReceived(null,e.card_nonce,e.card,n,o,this.selectedShippingOption),delete this.session},L.prototype.getApplePayMerchantId=function(){var t=this.options.applicationId,e=s.a.getParentLocation().hostname;return/(squareupstaging|squareupsandbox)\.com$/.test(e)?t="merchant.com.squareup.sdktest":/squareup\.com$/.test(e)&&(t="merchant.com.squareup.sdk"),t},L.prototype.getSupportedApplePayVersion=function(){for(var t=3;0<t&&!ApplePaySession.supportsVersion(t);)t--;return t},L.prototype.getDefaultShippingOption=function(t){return t.error||t.shippingContactErrors||!t.shippingOptions?null:t.shippingOptions[0]},L.prototype.updateApplePayPaymentRequest=function(t){t.newTotal&&(this.applePayPaymentRequest.total=t.newTotal),t.newLineItems&&(this.applePayPaymentRequest.lineItems=t.newLineItems),t.newShippingMethods&&(this.applePayPaymentRequest.shippingMethods=t.newShippingMethods)};var O=L;function R(t){if(this.controller=t,this.options=t.options,this.callbacks=t.callbacks,this.token=null,this.jsLoaded=null,this.enableMethodCalled=!1,this.controller.enabledDigitalWallets.indexOf(r.a.wallets.GOOGLE_PAY)<0)this.controller.enableMethod(r.a.wallets.GOOGLE_PAY,!1);else if(this.options.googlePay&&"function"==typeof this.callbacks.createPaymentRequest&&"function"==typeof this.callbacks.cardNonceResponseReceived){var e=this.options.googlePay.elementId;if(this.element=s.a.getDocument().getElementById(e),!this.element)throw new i.a.ElementNotFoundError(e);if(this.gatewayMerchantId=this.options.locationId||this.options.accountId,!this.gatewayMerchantId)throw new i.a.MissingOptionError("locationId");this.fetchGooglePayJs(),this.controller.messageHandlers.add(r.a.events.RECEIVE_GOOGLE_PAY_CARD_NONCE,this.receiveGooglePayCardNonce.bind(this)),this.controller.messageHandlers.add(r.a.events.RECEIVE_GOOGLE_PAY_TOKEN,this.receiveGooglePayToken.bind(this)),this.controller.sendEvent(r.a.events.LOAD_WALLET,r.a.wallets.GOOGLE_PAY)}else this.controller.enableMethod(r.a.wallets.GOOGLE_PAY,!1)}R.prototype.fetchGooglePayJs=function(){var t=s.a.getDocument().createElement("script");t.onload=this.googlePayJsFetched.bind(this),t.src=r.a.GOOGLE_PAY_JS,s.a.getDocument().body.appendChild(t)},R.prototype.googlePayJsFetched=function(){if("undefined"!=typeof google){this.paymentsClient=new google.payments.api.PaymentsClient({environment:this.options.env.googlePayEnv});var t=this.googlePayLoaded.bind(this);this.paymentsClient.isReadyToPay(this.buildBaseConfiguration()).then(function(e){e.result?t(!0):t(!1)}).catch(function(){t(!1)})}else this.googlePayLoaded(!1)},R.prototype.googlePayLoaded=function(t){this.jsLoaded=t,this.tryEnablingGooglePay()},R.prototype.tryEnablingGooglePay=function(){!0!==this.enableMethodCalled&&(!1===this.jsLoaded?(this.controller.enableMethod(r.a.wallets.GOOGLE_PAY,!1),this.enableMethodCalled=!0):!0===this.jsLoaded&&null!==this.token&&(this.element.addEventListener("click",this.requestPayment.bind(this)),this.controller.enableMethod(r.a.wallets.GOOGLE_PAY,!0),this.enableMethodCalled=!0))},R.prototype.requestPayment=function(){var t=new N(this.callbacks.createPaymentRequest()).toGooglePay(this);t.merchantInfo={merchantId:"05498866192997955200",authJwt:this.token};var e=this.requestGooglePayCardNonce.bind(this);this.paymentsClient.loadPaymentData(t).then(function(n){n.apiVersion==t.apiVersion&&n.apiVersionMinor==t.apiVersionMinor&&e(n)}).catch(function(){})},R.prototype.receiveGooglePayToken=function(t){var e=t.payload;e.errors||(this.token=e.token,this.tryEnablingGooglePay())},R.prototype.requestGooglePayCardNonce=function(t){this.controller.sendEvent(r.a.events.REQUEST_GOOGLE_PAY_CARD_NONCE,{googlepay_data:t})},R.prototype.receiveGooglePayCardNonce=function(t){var e=t.payload;if(e.errors)this.callbacks.cardNonceResponseReceived(e.errors);else{var n=C.a.fromGooglePay(e.billing_contact),o=C.a.fromGooglePay(e.shipping_contact);this.callbacks.cardNonceResponseReceived(null,e.card_nonce,e.card,n,o)}},R.prototype.buildBaseConfiguration=function(){return{apiVersion:2,apiVersionMinor:0,allowedPaymentMethods:[{type:"CARD",parameters:{allowedAuthMethods:["PAN_ONLY","CRYPTOGRAM_3DS"],allowedCardNetworks:["AMEX","DISCOVER","MASTERCARD","VISA"],billingAddressRequired:!0},tokenizationSpecification:{type:"PAYMENT_GATEWAY",parameters:{gateway:"square",gatewayMerchantId:this.gatewayMerchantId}}}]}};var w=R;function M(t){if(this.controller=t,this.options=t.options,this.controller.enabledDigitalWallets.indexOf(r.a.wallets.MASTERPASS)<0)this.controller.enableMethod(r.a.wallets.MASTERPASS,!1);else if(this.options.masterpass&&"function"==typeof this.controller.callbacks.createPaymentRequest&&"function"==typeof this.controller.callbacks.cardNonceResponseReceived){var e=this.options.masterpass.elementId;if(this.element=s.a.getDocument().getElementById(e),!this.element)throw new i.a.ElementNotFoundError(e);this.checkoutId="",this.cartId="",this.masterpassWindow=null,this.controller.messageHandlers.add(r.a.events.RECEIVE_MASTERPASS_TRANSACTION,this.receiveTransaction.bind(this)),this.controller.messageHandlers.add(r.a.events.SET_MASTERPASS_CHECKOUT_ID,this.setCheckoutId.bind(this)),this.controller.sendEvent(r.a.events.LOAD_WALLET,r.a.wallets.MASTERPASS)}else this.controller.enableMethod(r.a.wallets.MASTERPASS,!1)}M.prototype.setCheckoutId=function(t){this.checkoutId=t.checkoutId,this.element.addEventListener("click",this._requestPayment.bind(this)),this.controller.enableMethod(r.a.wallets.MASTERPASS,!0)},M.prototype._requestPayment=function(){if(!this.masterpassWindow||this.masterpassWindow.closed){var t=this.controller.callbacks.createPaymentRequest();this.cartId=u.a.guid();var e=s.a.getWindow().screen.width/2-510,n=s.a.getWindow().screen.height/2-450;this.masterpassWindow=s.a.getWindow().open("","Masterpass","width=1000,height=800,left="+e+",top="+n+",screenX="+e+",screenY="+n+",toolbar=no,menubar=no,scrollbars=no,location=yes,directories=no");var o=this.masterpassWindow.document;this._buildWindowContent(this.options.env,t,o)}else this.masterpassWindow.focus()},M.prototype._buildWindowContent=function(t,e,n){var o=e.total.amount,i=e.currencyCode,a=t.serviceUrl(r.a.endpoints.MASTERPASS_CALLBACK,{"formId":this.controller.formId}),s={checkoutId:this.checkoutId,allowedCardTypes:["visa","masterCard","discover","amex"],amount:o,currency:i,suppress3Ds:!1,suppressShippingAddress:!e.requestShippingAddress,cartId:this.cartId,callbackUrl:a},l=n.createElement("script");l.setAttribute("type","text/javascript"),l.innerText="function start() { masterpass.checkout(".concat(JSON.stringify(s),"); }");var c=n.createElement("script");c.setAttribute("type","text/javascript"),c.setAttribute("src",t.masterpassJsUrl),c.setAttribute("onload","start()");var p=n.createElement("body");p.appendChild(l),p.appendChild(c),n.body=p},M.prototype.receiveTransaction=function(t){this.masterpassWindow&&(this.masterpassWindow.close(),this.masterpassWindow=null);var e=t.payload;if("success"!==e.status)return!1;this.controller.sendEvent(r.a.events.REQUEST_MASTERPASS_CARD_NONCE,{client_id:this.options.applicationId,masterpass_data:{transaction_id:e.transactionId,cart_id:this.cartId}})};var D=M,k={CHECKOUT:"checkout",CART:"cart",PRODUCT_DETAIL:"productDetail"},q="VALIDATION_ERROR",F={INSTALLMENTS_APPLICATION_INELIGIBLE:{type:"INSTALLMENTS_APPLICATION_INELIGIBLE",message:"The merchant is not eligible for Installments or this transaction is not eligible for Installments"},INSTALLMENTS_APPLICATION_DECLINED:{type:"INSTALLMENTS_APPLICATION_DECLINED",message:"The buyer's Installments application was declined"},INSTALLMENTS_APPLICATION_CANCELLED:{type:"INSTALLMENTS_APPLICATION_CANCELLED",message:"The buyer cancelled the Installments application"},PAYMENT_REQUEST_INVALID:{type:"PAYMENT_REQUEST_INVALID",message:"The payment request object provided is invalid"},PAYMENT_DETAILS_UPDATE_INVALID:{type:"PAYMENT_DETAILS_UPDATE_INVALID",message:"The payment details update object provided is invalid"},INSTALLMENTS_NOT_CONFIGURED:{type:"INSTALLMENTS_NOT_CONFIGURED",message:"Installments is not configured correctly"},INSTALLMENTS_NOT_READY:{type:"INSTALLMENTS_NOT_READY",message:"Installments has not finished loading"},UNKNOWN:{type:"UNKNOWN",message:"An unknown error has occurred"}},G={VERSION:"0.1.3",SRI:"sha256-XZOaA97xF5EHva5baT2B6LXnkfix1TV0z9PLHUx7MmY= sha384-Y4N9cDFaj6tusFLeOOdrqjk/co7KT/3acK5nD7ExFrt//Tq/y7GjRCM8/XtgeKd1 sha512-VG8Wk68zafFEfDSXOMaxQKvWNHzod5XSTkfsCQiSvPHJbsPJ5Ahx1TTyR++JUzcchiMhHLPFXwzh29qryQ4snw=="},j={VERSION:"0.1.3",SRI:"sha256-sq0X7vnWVrzVF/WQrPtV75ps6IL+NX0mQUNs0JTQJGg= sha384-TO9TkCS3K1cdtcbId7Wt1rkCYxmQdrjmQGIYfNb7dTgIs7/4Lb4B/LPc7dEjuLQx sha512-oa6v9wAU9xH0DtMB/FN4fm71Wb2SfdwghKtabMnENBopBT02n4y+ZE8pH/agvC1m2XChppe2KpEV19KFjAxJEA=="};function U(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function V(t){var e;this.controller=t,this.options=t.options,this.callbacks=t.callbacks,this.instEnv=(e=this.options.env,{URL:function(t){switch(e.name){case"development":case"sandbox":case"staging":case"test":case"mock":return"https://installments-ad-production-f.squarecdn.com/staging/capital-installments-staging-".concat(j.VERSION,".js");case"production":default:return"https://installments-ad-production-f.squarecdn.com/production/capital-installments-production-".concat(G.VERSION,".js")}}(),SRI:function(t){switch(e.name){case"development":case"sandbox":case"staging":case"test":case"mock":return j.SRI;case"production":default:return G.SRI}}()}),this._validateOptions()&&this._fetchInstallmentsPayJs()}V.prototype._validateOptions=function(){if(!this.options.installments||"function"!=typeof this.callbacks.createPaymentRequest||"function"!=typeof this.callbacks.cardNonceResponseReceived)return this._enableInstallmentsMethod(!1),!1;if(!this.options.locationId)throw new i.a.MissingOptionError("locationId");if(this.modalType=this.options.installments.modalType||k.CHECKOUT,-1===Object.values(k).indexOf(this.modalType))throw new i.a.InvalidOptionError("installments.modalType");return!0},V.prototype._fetchInstallmentsPayJs=function(){var t=s.a.getDocument().createElement("script");t.onload=this._installmentsPayJsFetched.bind(this),t.onerror=function(){this._enableInstallmentsMethod(!1)}.bind(this),t.src=this.instEnv.URL,t.integrity=this.instEnv.SRI,t.crossOrigin="anonymous",s.a.getDocument().body.appendChild(t)},V.prototype._installmentsPayJsFetched=function(){"undefined"!=typeof CapitalInstallments?this._enableInstallments():this._enableInstallmentsMethod(!1)},V.prototype._enableInstallments=function(){var t=this,e=new N(this.callbacks.createPaymentRequest());if(e.isValid()){var n=e.toInstallments();try{this.capitalClient=new CapitalInstallments({applicationId:this.options.applicationId,locationId:this.options.locationId,config:{modalType:this.modalType},paymentRequest:n,onNonceResponse:this._nonceResponseReceived.bind(this)})}catch(e){if(this._enableInstallmentsMethod(!1),e.type===q){var o=[];e.validationErrors.forEach(function(t){var e=t.attribute.split(".");"paymentRequest"===e[0]&&2===e.length&&o.push(e[1])}),0<o.length&&u.a.logInvalidFieldsError("PaymentRequest",o)}return}this.capitalClient.load(),this.capitalClient.checkMerchantEligibility().then(function(e){e.success?t._enableInstallmentsMethod(!0):t._enableInstallmentsMethod(!1)}).catch(function(){t._enableInstallmentsMethod(!1)})}else this._enableInstallmentsMethod(!1)},V.prototype.updatePaymentDetails=function(t,e){if(this.capitalClient){var n=new A(t);if(n.isValid()){var o=n.toInstallments();this.capitalClient.updatePaymentRequest(o).then(function(t){t.eligible?e(null,!0):e([F.INSTALLMENTS_APPLICATION_INELIGIBLE],!1)}).catch(function(t){switch(t.type){case q:return void e([F.PAYMENT_DETAILS_UPDATE_INVALID],!1);default:return void e([F.UNKNOWN],!1)}})}else e([F.PAYMENT_DETAILS_UPDATE_INVALID],!1)}else e([F.INSTALLMENTS_NOT_READY],!1)},V.prototype.getInstallmentsPricing=function(t){this.capitalClient?this.capitalClient.getPricing().then(function(e){t(null,e)}).catch(function(e){"FINANCING_NOT_AVAILABLE"!==e.type?t([F.UNKNOWN]):t([F.INSTALLMENTS_APPLICATION_INELIGIBLE])}):t([F.INSTALLMENTS_NOT_READY])},V.prototype.showInstallmentsModal=function(){var t=this;this.capitalClient?this.capitalClient.showModal().catch(function(e){"MERCHANT_NOT_ELIGIBLE"!==e.type?t.callbacks.cardNonceResponseReceived([F.UNKNOWN]):t.callbacks.cardNonceResponseReceived([F.INSTALLMENTS_APPLICATION_INELIGIBLE])}):this.callbacks.cardNonceResponseReceived([F.INSTALLMENTS_NOT_READY])},V.prototype._nonceResponseReceived=function(t,e){var n;if(t)this.callbacks.cardNonceResponseReceived([F.UNKNOWN]);else if("COMPLETED"!==e.status){var o=(U(n={},"DENIED",F.INSTALLMENTS_APPLICATION_DECLINED),U(n,"CANCELLED",F.INSTALLMENTS_APPLICATION_CANCELLED),n)[e.status]||F.UNKNOWN;this.callbacks.cardNonceResponseReceived([o])}else this.callbacks.cardNonceResponseReceived(null,e.nonce,{paymentOption:e.paymentOption})},V.prototype._enableInstallmentsMethod=function(t){this.controller.enableMethod("installments",t)};var W=V;function B(t){return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function H(t){this.options=t,this.env=t.env,this.errorLogger=t.errorLogger,this.callbacks=this.options.callbacks,this.formId=u.a.guid(),this.iframeControllers={},this.loadedIframes=[],this.loadedWallets={},this.digitalWallets={},this.messageBuffer=[],this.messageHandlers=new a.a,this.inputTypes=u.a.cloneObject(this.options.expectedInputTypes),this.inputTypes.GIFT_CARD||(this.digitalWallets=u.a.cloneObject(H.DIGITAL_WALLETS)),this.iframeNames={},this.inputTypes.MAIN_FRAME="main",this.telemetry=new p.a({env:this.options.env,applicationId:this.options.applicationId,locationId:this.options.locationId,accountId:this.options.accountId,apiWrapper:this.options.apiWrapper})}H.RESIZE_TIMEOUT_MS=250,H.DIGITAL_WALLETS={applePay:O,googlePay:w,masterpass:D,installments:W},H.prototype.build=function(){0<Object.keys(this.iframeControllers).length||(this.injectMainFrame(),this._buildAt=Date.now(),this.buildIframeControllers(),this.addPostMessageEventListeners(),this.addResizeEventListener())},H.prototype.pluginShim=function(){var t=this;return{options:this.options,formId:this.formId,enabledDigitalWallets:this.enabledDigitalWallets||"",callbacks:this.callbacks,messageHandlers:this.messageHandlers,enableMethod:this.enableMethod.bind(this),sendEvent:function(e,n){t.sendIframeMessage({eventName:e,payload:n})}}},H.prototype.injectMainFrame=function(){var t=s.a.getDocument().createElement("div"),e=this.formId;t.id=e,s.a.getDocument().body.appendChild(t),this.options.main={elementId:e}},H.prototype.enableMethod=function(t,e){var n={};(n[t]=e)||delete this.loadedWallets[t],this.callbacks&&"function"==typeof this.callbacks.methodsSupported&&this.callbacks.methodsSupported(n)},H.prototype.buildIframeControllers=function(){for(var t in this.inputTypes)if(u.a.hasOwn(this.inputTypes,t)){var e=this.inputTypes[t];this.buildIframeController(e)}},H.prototype.getContainerElement=function(t){var e=s.a.getDocument().getElementById(t);if(!e)throw new i.a.ElementNotFoundError(t);if(t!==this.options.main.elementId){var n=e.innerHTML;e.innerHTML="!";var o=e.offsetHeight;e.innerHTML=n,o<=0&&s.a.getWindow().console.warn(new i.a.ElementNotVisibleError(t))}return e},H.prototype.buildIframeController=function(t){var e=this.options[t].elementId,n=this.getContainerElement(e),o=u.a.cloneObject(this.options[t]);o.inputClass=this.options.inputClass,o.inheritedClassName=n.className,o.env=this.env,o.applicationId=this.options.applicationId,o.locationId=this.options.locationId,o.accountId=this.options.accountId,this.iframeControllers[t]=new c(t,o,this.iframeCallbacks()),this.iframeNames[t]=this.iframeControllers[t].name(),(this.iframeControllers[t].originalElement=n).parentElement.replaceChild(this.iframeControllers[t].element,n)},H.prototype.destroy=function(){for(var t in this.removePostMessageEventListeners(),this.removeTouchStartEventListener(),this.removeResizeEventListener(),this.iframeControllers)u.a.hasOwn(this.iframeControllers,t)&&(this.iframeControllers[t].destroy(),delete this.iframeControllers[t])},H.prototype.iframeCallbacks=function(){return{onload:function(t){this.addLoadedFrame(t)}.bind(this)}},H.prototype.addLoadedFrame=function(t){-1===this.loadedIframes.indexOf(t)&&this.loadedIframes.push(t),this.loadedIframes.length===Object.keys(this.inputTypes).length&&this.loadFormController()},H.prototype.receiveMessageCallback=function(t){if(t.origin===this.env.serviceUrl()&&t.data.formId===this.formId){switch(t.data.eventName){case r.a.events.CARD_NONCE_RESPONSE_RECEIVED:this.options.callbacks&&"function"==typeof this.options.callbacks.cardNonceResponseReceived&&this.options.callbacks.cardNonceResponseReceived(t.data.value.errors,t.data.value.card_nonce,t.data.value.card,t.data.value.billing_contact,t.data.value.shipping_contact);break;case r.a.events.INPUT_EVENT_RECEIVED:var e=this.iframeControllers[t.data.inputEvent.field];switch(t.data.inputEvent.eventType){case r.a.inputEvents.ERROR_CLASS_ADDED:var n=this.classNameForClassType("error");e.addClass(n);break;case r.a.inputEvents.ERROR_CLASS_REMOVED:var o=this.classNameForClassType("error");e.removeClass(o);break;case r.a.inputEvents.FOCUS_CLASS_ADDED:var a=this.classNameForClassType("focus");e.addClass(a);break;case r.a.inputEvents.FOCUS_CLASS_REMOVED:var s=this.classNameForClassType("focus");e.removeClass(s)}this.options.callbacks&&"function"==typeof this.options.callbacks.inputEventReceived&&this.options.callbacks.inputEventReceived(t.data.inputEvent);break;case r.a.events.SET_INPUT_HEIGHT:var l=this.iframeControllers[t.data.inputType].element,p=Math.max(t.data.inputHeight,c.MIN_HEIGHT);l.setAttribute("height",p),0!==t.data.inputHeight||this._inputHeightError||(this._inputHeightError=!0,this.errorLogger.capture(new i.a.InputHeightZeroError));break;case r.a.events.PAYMENT_FORM_LOADED:this._loadedAt=Date.now(),this.sessionId=t.data.sessionId,this.telemetry.set("sessionId",this.sessionId),this.addTouchStartEventListener(),this.enabledDigitalWallets=t.data.enabledDigitalWallets;var d=this.pluginShim();for(var h in this.digitalWallets)u.a.hasOwn(this.digitalWallets,h)&&(this.loadedWallets[h]=new this.digitalWallets[h](d));var m=this._loadedAt-this._buildAt;for(this.telemetry.collectLoadTiming({tti:m}),this.telemetry.collectConfiguration(u.a.cloneObject(this.options)),this.options.callbacks&&"function"==typeof this.options.callbacks.paymentFormLoaded&&this.options.callbacks.paymentFormLoaded();0<this.messageBuffer.length;)this.sendIframeMessage(this.messageBuffer.pop())}this.messageHandlers.handle(t.data.eventName,t.data)}},H.prototype.updateStylesOnResize=function(){clearTimeout(this.fireOnResizeEnd),this.fireOnResizeEnd=setTimeout(this.buildStylesForScreenWidth.bind(this),H.RESIZE_TIMEOUT_MS)},H.prototype.addPostMessageEventListeners=function(){this._messageCallback=this.receiveMessageCallback.bind(this),s.a.getWindow().addEventListener("message",this._messageCallback)},H.prototype.removePostMessageEventListeners=function(){s.a.getWindow().removeEventListener("message",this._messageCallback)},H.prototype.addTouchStartEventListener=function(){this._touchstartCallback=function(){this._touchStarted=!0}.bind(this),this._touchendCallback=function(){this._touchStarted&&this.blurAllInputs(),this._touchStarted=!1}.bind(this),this._touchmoveCallback=function(){this._touchStarted=!1}.bind(this),this._touchcancelCallback=this._touchmoveCallback,s.a.getWindow().addEventListener("touchstart",this._touchstartCallback),s.a.getWindow().addEventListener("touchend",this._touchendCallback),s.a.getWindow().addEventListener("touchmove",this._touchmoveCallback),s.a.getWindow().addEventListener("touchcancel",this._touchcancelCallback)},H.prototype.removeTouchStartEventListener=function(){s.a.getWindow().removeEventListener("touchstart",this._touchstartCallback),s.a.getWindow().removeEventListener("touchend",this._touchendCallback),s.a.getWindow().removeEventListener("touchmove",this._touchmoveCallback),s.a.getWindow().removeEventListener("touchcancel",this._touchcancelCallback)},H.prototype.addResizeEventListener=function(){this._resizeCallback=this.updateStylesOnResize.bind(this),s.a.getWindow().addEventListener("resize",this._resizeCallback)},H.prototype.removeResizeEventListener=function(){s.a.getWindow().removeEventListener("resize",this._resizeCallback),clearTimeout(this.fireOnResizeEnd)},H.prototype.classNameForClassType=function(t){return this.options.inputClass+"--"+t},H.prototype.sendIframeMessage=function(t){var e=this.iframeControllers[this.inputTypes.MAIN_FRAME].element.contentWindow;if(e)if(t.formId=this.formId,-1!==this.loadedIframes.indexOf(this.inputTypes.MAIN_FRAME)){var n=this.env.serviceUrl();e.postMessage(t,n)}else this.messageBuffer.push(t);else s.a.getWindow().console.warn(new i.a.IframeDoesNotExistError)},H.prototype.loadFormController=function(){var t={envName:this.env.name,applicationId:this.options.applicationId,locationId:this.options.locationId,accountId:this.options.accountId,websiteUrl:this.options.websiteUrl,hostOrigin:s.a.getOrigin(),inputStyles:this.options.inputStyles,inputTypes:this.options.expectedInputTypes,autoFill:this.options.autoFill,googlePayTokenUrl:s.a.getDocument().location.href,version:"3be0c4f0b6",apiWrapper:this.options.apiWrapper},e=this;Object.keys(this.inputTypes).forEach(function(n){var o=e.inputTypes[n];t[o]=e.options[o]});var n={eventName:r.a.events.LOAD_FORM_CONTROLLER,iframes:this.iframeNames,options:t,initialScreenWidth:s.a.getWindow().innerWidth};this.sendIframeMessage(n)},H.prototype.requestCardNonceIfValidForm=function(){this.sendIframeMessage({eventName:r.a.events.REQUEST_CARD_NONCE_IF_VALID_FORM})},H.prototype.buildStylesForScreenWidth=function(){this.sendIframeMessage({eventName:r.a.events.BUILD_STYLES_FOR_SCREEN_WIDTH,screenWidth:s.a.getWindow().innerWidth})},H.prototype.blurAllInputs=function(){this.sendIframeMessage({eventName:r.a.events.BLUR_ALL_INPUTS})},H.prototype.setPostalCode=function(t){var e=B(t);"string"!==e&&"number"!==e||this.sendIframeMessage({eventName:r.a.events.SET_POSTAL_CODE,postalCode:""+t})},H.prototype.hasLoaded=function(){return!!this._loadedAt},H.prototype.getInstallmentsPricing=function(t){var e=this.loadedWallets.installments;e?e.getInstallmentsPricing(t):t([F.INSTALLMENTS_APPLICATION_INELIGIBLE])},H.prototype.showInstallmentsModal=function(){var t=this.loadedWallets.installments;t?t.showInstallmentsModal():this.callbacks.cardNonceResponseReceived([F.INSTALLMENTS_APPLICATION_INELIGIBLE])},H.prototype.updatePaymentDetails=function(t,e){var n=this.loadedWallets.installments;n?n.updatePaymentDetails(t,e):e([F.INSTALLMENTS_APPLICATION_INELIGIBLE],!1)};var x=H,Y=n(8);function K(t){return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function J(t){this.options=t,this.env=Object(Y.a)(t?t.env:"production"),this.env.name!=r.a.SERVER_ENV&&s.a.getWindow().console.warn("Requested environment ("+this.env.name+") does not match server environment ("+r.a.SERVER_ENV+"). Unexpected behaviour may occur due to mismatched environments."),this.errorLogger=new o.a({applicationId:this.options&&this.options.applicationId,apiWrapper:this.options&&this.options.apiWrapper,captureUncaughtExceptions:new RegExp(this.env.jsUrl()),source:"SqPaymentForm",env:this.env});var e=this.validateOptions(this.options);if(e)throw this.errorLogger.capture(e),e;if(0===this.options.applicationId.indexOf("sandbox-")&&s.a.getWindow().console.info("SqPaymentForm initialized in Sandbox Mode. See https://docs.connect.squareup.com/articles/using-sandbox/"),!u.a.embeddingAllowed(this.env,s.a.getWindow().location)){var n=new i.a.HttpsRequiredError;throw this.errorLogger.capture(n),n}var a=u.a.cloneObject(this.options);a._env=this.options.env,a.env=this.env,a.errorLogger=this.errorLogger,this.clientController=new x(a),!1!==this.options.autoBuild&&(this._handleDomContentLoaded=this.build.bind(this),u.a.isIE10()?s.a.getWindow().addEventListener("load",this._handleDomContentLoaded):"loading"===s.a.getReadyState()&&s.a.getDocument().addEventListener("DOMContentLoaded",this._handleDomContentLoaded))}J.isSupportedBrowser=u.a.isSupportedBrowser.bind(null),J.prototype.build=function(){if(this.detachLoadEvent(),this.build=function(){var t=new i.a.FormAlreadyBuiltError;throw this.errorLogger.capture(t),t},!u.a.isSupportedBrowser())return this.errorLogger.capture(new i.a.UnsupportedBrowserError),void(this.options.callbacks&&"function"==typeof this.options.callbacks.unsupportedBrowserDetected&&this.options.callbacks.unsupportedBrowserDetected());try{this.clientController.build()}catch(t){throw this.errorLogger.capture(t),t}},J.prototype.destroy=function(){this.detachLoadEvent(),this.clientController&&(this.clientController.destroy(),this.clientController=null),this.errorLogger.destroy(),this.errorLogger=null,this.build=function(){throw new i.a.FormAlreadyDestroyedError("build")},this.requestCardNonce=function(){throw new i.a.FormAlreadyDestroyedError("requestCardNonce")}},J.prototype.requestCardNonce=function(){if(!this.clientController.hasLoaded()){var t=new i.a.FormNotReadyError("requestCardNonce");throw this.errorLogger.capture(t),t}this.clientController.requestCardNonceIfValidForm()},J.prototype.recalculateSize=function(){this.clientController.buildStylesForScreenWidth()},J.prototype.setPostalCode=function(t){this.clientController.setPostalCode(t)},J.prototype.focus=function(t){var e,n=!1;for(var o in this.clientController.inputTypes)if(u.a.hasOwn(this.clientController.inputTypes,o)&&t==this.clientController.inputTypes[o]){n=!0;break}if(n?this.clientController.hasLoaded()||(e=new i.a.FormNotReadyError("focus")):e=new i.a.InvalidFieldError(t),e)throw this.errorLogger.capture(e),e;this.clientController.iframeControllers[t].focus()},J.prototype.getInstallmentsPricing=function(t){var e;if(void 0===t||"function"!=typeof t?e=new i.a.InvalidFunctionArgumentError("getInstallmentsPricing"):this.clientController.hasLoaded()||(e=new i.a.FormNotReadyError("getInstallmentsPricing")),e)throw this.errorLogger.capture(e),e;this.clientController.getInstallmentsPricing(t)},J.prototype.updatePaymentRequest=function(t,e){var n;if(void 0===t||"object"!==K(t)||void 0===e||"function"!=typeof e?n=new i.a.InvalidFunctionArgumentError("updatePaymentRequest"):this.clientController.hasLoaded()||(n=new i.a.FormNotReadyError("updatePaymentRequest")),n)throw this.errorLogger.capture(n),n;this.clientController.updatePaymentDetails(t,e)},J.prototype.showInstallmentsModal=function(){if(!this.clientController.hasLoaded()){var t=new i.a.FormNotReadyError("showInstallmentsModal");throw this.errorLogger.capture(t),t}this.clientController.showInstallmentsModal()},J.prototype.detachLoadEvent=function(){this._handleDomContentLoaded&&(s.a.getDocument().removeEventListener("DOMContentLoaded",this._handleDomContentLoaded),s.a.getWindow().removeEventListener("load",this._handleDomContentLoaded),this._handleDomContentLoaded=null)},J.prototype.validateOptions=function(t){if(!t)return new i.a.MissingArgumentError("options");if("[object Object]"!==Object.prototype.toString.call(t))return new i.a.InvalidArgumentError("options","object");if(!t.applicationId)return new i.a.MissingOptionError("applicationId");var e=!!t[r.a.inputTypes.GIFT_CARD],n=this.fieldsRequested(t,this.getCardFormFields()),o=this.fieldsRequested(t,Object.keys(x.DIGITAL_WALLETS)),a=this.paymentMethodsRequested(e,n,o);if(e||0<n.length){if(!t.inputClass)return new i.a.MissingOptionError("inputClass");if(-1!==t.inputClass.indexOf(" "))return new i.a.InvalidOptionError("inputClass")}if(!t.callbacks)return new i.a.MissingOptionError("callbacks");if(!t.callbacks.cardNonceResponseReceived)return new i.a.MissingCallbackError("cardNonceResponseReceived");if("function"!=typeof t.callbacks.cardNonceResponseReceived)return new i.a.InvalidCallbackError("cardNonceResponseReceived");if(t.locationId&&t.accountId)throw new i.a.TooManyIdsError;if(0===a.length)return new i.a.MissingPaymentMethodError;if(1<a.length&&e){var s=n.concat(o);return new i.a.UnexpectedInputTypeError(s[0])}var l={};for(var c in e?l={GIFT_CARD:r.a.inputTypes.GIFT_CARD}:0<n.length&&delete(l=u.a.cloneObject(r.a.inputTypes)).GIFT_CARD,this.options.expectedInputTypes=l)if(u.a.hasOwn(l,c)){var p=l[c],d=this.validateInputType(p,t);if(d)return d}if(0<o.length){if(!t.callbacks.createPaymentRequest)return new i.a.MissingCallbackError("createPaymentRequest");if("function"!=typeof t.callbacks.createPaymentRequest)return new i.a.InvalidCallbackError("createPaymentRequest");if(!t.callbacks.methodsSupported)return new i.a.MissingCallbackError("methodsSupported");if("function"!=typeof t.callbacks.methodsSupported)return new i.a.InvalidCallbackError("methodsSupported")}return t.inputStyles&&!Array.isArray(t.inputStyles)?new i.a.InvalidInputStylesError:void 0!==t.autoBuild&&"boolean"!=typeof t.autoBuild?new i.a.InvalidOptionType("autoBuild"):void 0!==t.autoFill&&"boolean"!=typeof t.autoFill?new i.a.InvalidOptionType("autoFill"):void 0},J.prototype.getCardFormFields=function(){var t=u.a.cloneObject(r.a.inputTypes);return delete t.GIFT_CARD,u.a.objectValues(t)},J.prototype.fieldsRequested=function(t,e){var n=[];return e.forEach(function(e){t[e]&&n.push(e)}),n},J.prototype.paymentMethodsRequested=function(t,e,n){var o=[];return t&&o.push(r.a.inputTypes.GIFT_CARD),0<e.length&&o.push(r.a.inputTypes.CARD_NUMBER),o.push.apply(o,n),o},J.prototype.validateInputType=function(t,e){if(t!==r.a.inputTypes.POSTAL_CODE||!1!==e[t])return e[t]?e[t].elementId?void 0:new i.a.MissingElementIdError(t):new i.a.MissingInputTypeError(t);delete this.options.expectedInputTypes.POSTAL_CODE};var z=J;s.a.getWindow().SqPaymentForm=z}]);